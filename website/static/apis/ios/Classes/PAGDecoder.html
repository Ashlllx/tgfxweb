<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>PAGDecoder Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">libpag </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Tencent</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/Make:">+ Make:</option>
		
		<option value="//api/name/Make:maxFrameRate:scale:">+ Make:maxFrameRate:scale:</option>
		
	</optgroup>
	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/checkFrameChanged:">- checkFrameChanged:</option>
		
		<option value="//api/name/copyFrameTo:rowBytes:at:">- copyFrameTo:rowBytes:at:</option>
		
		<option value="//api/name/frameAtIndex:">- frameAtIndex:</option>
		
		<option value="//api/name/frameRate">- frameRate</option>
		
		<option value="//api/name/height">- height</option>
		
		<option value="//api/name/numFrames">- numFrames</option>
		
		<option value="//api/name/readFrame:to:">- readFrame:to:</option>
		
		<option value="//api/name/width">- width</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">PAGDecoder Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>PAGDecoder.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>PAGDecoder provides a utility to read image frames directly from a <a href="../Classes/PAGComposition.html">PAGComposition</a>, and caches the
image frames as a sequence file on the disk, which may significantly speed up the reading process
depending on the complexity of the <a href="../Classes/PAG.html">PAG</a> files. You can use the <a href="../Classes/PAGDiskCache.html">PAGDiskCache</a>::SetMaxDiskSize()
method to manage the cache limit of the disk usage.</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/Make:" title="Make:"></a>
	<h3 class="method-title"><code><a href="#//api/name/Make:">+&nbsp;Make:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Creates a new PAGDecoder with the specified <a href="../Classes/PAGComposition.html">PAGComposition</a>, using the composition&rsquo;s frame
rate and size. Please only keep an external reference to the <a href="../Classes/PAGComposition.html">PAGComposition</a> if you need to
modify it in the feature. Otherwise, the internal composition will not be released
automatically after the associated disk cache is complete, which may cost more memory than
necessary. Returns nil if the composition is nil. Note that the returned PAGDecoder may become
invalid if the associated <a href="../Classes/PAGComposition.html">PAGComposition</a> is added to a <a href="../Classes/PAGPlayer.html">PAGPlayer</a> or another PAGDecoder.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (nullable instancetype)Make:(nullable PAGComposition *)<em>composition</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/Make:maxFrameRate:scale:" title="Make:maxFrameRate:scale:"></a>
	<h3 class="method-title"><code><a href="#//api/name/Make:maxFrameRate:scale:">+&nbsp;Make:maxFrameRate:scale:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Creates a PAGDecoder with a <a href="../Classes/PAGComposition.html">PAGComposition</a>, a frame rate limit, and a scale factor for the
decoded image size. Please only keep an external reference to the <a href="../Classes/PAGComposition.html">PAGComposition</a> if you need to
modify it in the feature. Otherwise, the internal composition will not be released automatically
after the associated disk cache is complete, which may cost more memory than necessary. Returns
nullptr if the composition is nullptr. Note that the returned PAGDecoder may become invalid if
the associated <a href="../Classes/PAGComposition.html">PAGComposition</a> is added to a <a href="../Classes/PAGPlayer.html">PAGPlayer</a> or another PAGDecoder.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (nullable instancetype)Make:(nullable PAGComposition *)<em>composition</em> maxFrameRate:(float)<em>maxFrameRate</em> scale:(float)<em>scale</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/width" title="width"></a>
	<h3 class="method-title"><code><a href="#//api/name/width">&ndash;&nbsp;width</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the width of decoded image frames.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSInteger)width</code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/height" title="height"></a>
	<h3 class="method-title"><code><a href="#//api/name/height">&ndash;&nbsp;height</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the height of decoded image frames.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSInteger)height</code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/numFrames" title="numFrames"></a>
	<h3 class="method-title"><code><a href="#//api/name/numFrames">&ndash;&nbsp;numFrames</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the number of frames in the PAGDecoder. Note that the value may change if the associated
<a href="../Classes/PAGComposition.html">PAGComposition</a> was modified.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSInteger)numFrames</code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/frameRate" title="frameRate"></a>
	<h3 class="method-title"><code><a href="#//api/name/frameRate">&ndash;&nbsp;frameRate</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the frame rate of decoded image frames. The value may change if the associated
<a href="../Classes/PAGComposition.html">PAGComposition</a> was modified.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (float)frameRate</code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/checkFrameChanged:" title="checkFrameChanged:"></a>
	<h3 class="method-title"><code><a href="#//api/name/checkFrameChanged:">&ndash;&nbsp;checkFrameChanged:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns true if the frame at the given index has changed since the last copyFrameTo(),
readFrameTo(), or frameAtIndex() call. The caller should skip the corresponding call if
the frame has not changed.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)checkFrameChanged:(int)<em>index</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/copyFrameTo:rowBytes:at:" title="copyFrameTo:rowBytes:at:"></a>
	<h3 class="method-title"><code><a href="#//api/name/copyFrameTo:rowBytes:at:">&ndash;&nbsp;copyFrameTo:rowBytes:at:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Copies pixels of the image frame at the given index to the specified memory address. The format
of the copied pixels is in the BGRA color type with the premultiplied alpha type. Returns false
if failed. Note that caller must ensure that the rowBytes stays the same throughout every copying
call. Otherwise, it may return false.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)copyFrameTo:(void *)<em>pixels</em> rowBytes:(size_t)<em>rowBytes</em> at:(NSInteger)<em>index</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/readFrame:to:" title="readFrame:to:"></a>
	<h3 class="method-title"><code><a href="#//api/name/readFrame:to:">&ndash;&nbsp;readFrame:to:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Reads pixels of the image frame at the given index into the specified CVPixelBuffer. Returns
false if failed. Reading image frames into HardwareBuffer usually has better performance than
reading into memory.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)readFrame:(NSInteger)<em>index</em> to:(CVPixelBufferRef)<em>pixelBuffer</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/frameAtIndex:" title="frameAtIndex:"></a>
	<h3 class="method-title"><code><a href="#//api/name/frameAtIndex:">&ndash;&nbsp;frameAtIndex:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Returns the image frame at the specified index. Note that this method must be called while the
app is not in the background. Otherwise, it may return nil because the GPU code may not be
executed. It&rsquo;s recommended to read the image frames in forward order for better performance.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nullable UIImage *)frameAtIndex:(NSInteger)<em>index</em></code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">PAGDecoder.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2023 Tencent. All rights reserved. Updated: 2023-08-30</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>